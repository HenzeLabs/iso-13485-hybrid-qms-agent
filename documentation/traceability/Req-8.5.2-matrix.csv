Requirement ID,Requirement Description,Design Output,Code Location,Test Case,Test File,Verification Status,Validation Status,Risk ID,Release Version,Security Status
Req-8.5.2,CAPA Management System,WORKFLOW_API.md,device/src/capa_ingestion.py,TC-8.5.2-001,device/tests/test_capa_ingestion.py::test_create_capa_success,Pass,Pending,risk-CRM-005,v1.0-phase2-dec9-2025-rc1,VULN-001-RESOLVED
FR-8.5.2-001,Accept CAPA records with required fields,INGESTION_README.md,device/src/capa_ingestion.py:18-65,TC-8.5.2-001,device/tests/test_capa_ingestion.py::test_create_capa_success,Pass,Pending,risk-DATA-001,v1.0-phase2-dec9-2025-rc1
FR-8.5.2-001,Validate required CAPA fields,INGESTION_README.md,device/src/capa_ingestion.py:18-65,TC-8.5.2-002,device/tests/test_capa_ingestion.py::test_create_capa_missing_department,Pass,Pending,risk-DATA-001,v1.0-phase2-dec9-2025-rc1
FR-8.5.2-001,Validate CAPA severity,INGESTION_README.md,device/src/capa_ingestion.py:18-65,TC-8.5.2-003,device/tests/test_capa_ingestion.py::test_create_capa_invalid_severity,Pass,Pending,risk-DATA-001,v1.0-phase2-dec9-2025-rc1
FR-8.5.2-002,Store CAPA in BigQuery,WORKFLOW_API.md,device/src/bigquery_client.py:27-55,TC-BQ-001,device/tests/test_bigquery_client.py::test_insert_rows_success,Pass,Pending,risk-DATA-001,v1.0-phase2-dec9-2025-rc1
FR-8.5.2-002,BigQuery schema validation,WORKFLOW_API.md,device/src/bigquery_client.py:27-55,TC-BQ-002,device/tests/test_bigquery_client.py::test_insert_rows_with_logging,Pass,Pending,risk-DATA-001,v1.0-phase2-dec9-2025-rc1
FR-8.5.2-003,Link CAPAs to DCRs,WORKFLOW_API.md,device/src/dcr_ingestion.py:1-100,TC-8.5.2-INT-001,device/tests/test_dcr_capa_linking.py,Pending,Pending,risk-CRM-005,v1.0-phase2-dec9-2025-rc1
FR-8.5.2-004,POST /api/capa endpoint,WORKFLOW_API.md,device/src/workflow_router.py:1-100,TC-API-001,device/tests/test_workflow_api.py,Pending,Pending,risk-CRM-005,v1.0-phase2-dec9-2025-rc1
FR-8.5.2-004,GET /api/capa/{id} endpoint,WORKFLOW_API.md,device/src/workflow_router.py:1-100,TC-API-002,device/tests/test_workflow_api.py,Pending,Pending,risk-CRM-005,v1.0-phase2-dec9-2025-rc1
FR-8.5.2-004,PUT /api/capa/{id} endpoint,WORKFLOW_API.md,device/src/workflow_router.py:1-100,TC-API-003,device/tests/test_workflow_api.py,Pending,Pending,risk-CRM-005,v1.0-phase2-dec9-2025-rc1
FR-8.5.2-004,POST /api/dcr endpoint,WORKFLOW_API.md,device/src/workflow_router.py:1-100,TC-API-004,device/tests/test_workflow_api.py,Pending,Pending,risk-CRM-005,v1.0-phase2-dec9-2025-rc1
FR-8.5.2-005,Log CAPA creation,WORKFLOW_API.md,device/src/capa_ingestion.py:58-64,TC-8.5.2-004,device/tests/test_capa_ingestion.py::test_create_capa_bigquery_failure,Pass,Pending,risk-CRM-005,v1.0-phase2-dec9-2025-rc1
FR-8.5.2-005,Log BigQuery operations,WORKFLOW_API.md,device/src/bigquery_client.py:39-54,TC-BQ-003,device/tests/test_bigquery_client.py::test_insert_rows_handles_errors,Pass,Pending,risk-CRM-005,v1.0-phase2-dec9-2025-rc1
FR-8.5.2-005,Log status updates,WORKFLOW_API.md,device/src/capa_ingestion.py:206-226,TC-8.5.2-005,device/tests/test_capa_ingestion.py::test_update_capa_status,Pass,Pending,risk-CRM-005,v1.0-phase2-dec9-2025-rc1
FR-8.5.2-006,Add CAPA action items,WORKFLOW_API.md,device/src/capa_ingestion.py:113-147,TC-8.5.2-006,device/tests/test_capa_ingestion.py::test_add_capa_action,Pass,Pending,risk-CRM-005,v1.0-phase2-dec9-2025-rc1
FR-8.5.2-007,Add CAPA approval workflow,WORKFLOW_API.md,device/src/capa_ingestion.py:170-204,TC-8.5.2-007,device/tests/test_capa_ingestion.py::test_add_capa_approval,Pass,Pending,risk-CRM-005,v1.0-phase2-dec9-2025-rc1
FR-8.5.2-008,End-to-end CAPA workflow,WORKFLOW_API.md,device/src/capa_ingestion.py:1-307,TC-8.5.2-008,device/tests/test_capa_ingestion.py::test_end_to_end_capa_workflow,Pass,Pending,risk-CRM-005,v1.0-phase2-dec9-2025-rc1
FR-8.5.2-VAL-001,CAPA schema compliance,WORKFLOW_API.md,device/src/capa_ingestion.py:18-65,TC-8.5.2-VAL-001,device/tests/test_capa_ingestion.py::test_validate_capa_schema,Pass,Pending,risk-DATA-001,v1.0-phase2-dec9-2025-rc1
FR-8.5.2-VAL-002,Date format validation,WORKFLOW_API.md,device/src/capa_ingestion.py:44-56,TC-8.5.2-VAL-002,device/tests/test_capa_ingestion.py::test_validate_date_formats,Pass,Pending,risk-DATA-001,v1.0-phase2-dec9-2025-rc1
BQ-001,Query CAPA data,WORKFLOW_API.md,device/src/bigquery_client.py:57-70,TC-BQ-004,device/tests/test_bigquery_client.py::test_query_capas,Pass,Pending,risk-DATA-001,v1.0-phase2-dec9-2025-rc1
SEC-001,SQL injection prevention - update_capa_status,SECURITY-AUDIT-2025-12-09.md,device/src/capa_ingestion.py:231-260,TC-SEC-001,device/tests/test_sql_injection_security.py::test_update_capa_status_prevents_sql_injection,Pass,N/A,risk-DATA-001,v1.0-phase2-dec9-2025-rc1,VULN-001-RESOLVED
SEC-002,SQL injection prevention - update_capa_analysis,SECURITY-AUDIT-2025-12-09.md,device/src/capa_ingestion.py:70-128,TC-SEC-002,device/tests/test_sql_injection_security.py::test_update_capa_analysis_prevents_sql_injection,Pass,N/A,risk-DATA-001,v1.0-phase2-dec9-2025-rc1,VULN-001-RESOLVED
SEC-003,SQL injection prevention - complete_capa_action,SECURITY-AUDIT-2025-12-09.md,device/src/capa_ingestion.py:166-193,TC-SEC-003,device/tests/test_sql_injection_security.py::test_complete_capa_action_prevents_sql_injection,Pass,N/A,risk-DATA-001,v1.0-phase2-dec9-2025-rc1,VULN-001-RESOLVED
SEC-004,SQL injection prevention - get_capa_details,SECURITY-AUDIT-2025-12-09.md,device/src/capa_ingestion.py:262-320,TC-SEC-004,device/tests/test_sql_injection_security.py::test_get_capa_details_prevents_sql_injection,Pass,N/A,risk-DATA-001,v1.0-phase2-dec9-2025-rc1,VULN-001-RESOLVED
SEC-005,No f-string SQL with user input,SECURITY-AUDIT-2025-12-09.md,device/src/capa_ingestion.py:1-358,TC-SEC-005,device/tests/test_sql_injection_security.py::test_no_f_string_sql_in_queries,Pass,N/A,risk-DATA-001,v1.0-phase2-dec9-2025-rc1,VULN-001-RESOLVED
SEC-006,Datetime deprecation fix,SECURITY-AUDIT-2025-12-09.md,device/src/capa_ingestion.py:59,TC-SEC-006,device/tests/test_sql_injection_security.py::test_datetime_utc_not_deprecated,Pass,N/A,risk-DATA-001,v1.0-phase2-dec9-2025-rc1,RESOLVED
